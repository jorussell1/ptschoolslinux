---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
modules:
  - type: dnf
    install:
      packages:
        - gwenview
        - evince
        - gdm
    remove:
      packages:
        - sddm
  - type: systemd
    system:  
      enabled:
        - gdm.service
  - type: files
    files:
      - source: kde
        destination: /
  - type: script
    snippets:
      # Remove the gnome session file so no one accidently clicks it
      - rm /usr/share/wayland-sessions/gnome.desktop
      - rm /usr/share/wayland-sessions/gnome-wayland.desktop
      # This is needed to change the default panel favorites on kde and it's ugly and I don't like it
      - |
        sed -i '/<entry name="launchers" type="StringList">/,/<\/entry>/ s/<default>[^<]*<\/default>/<default>preferred:\/\/browser,applications:io.github.kolunmi.Bazaar.desktop,preferred:\/\/filemanager<\/default>/' /usr/share/plasma/plasmoids/org.kde.plasma.taskmanager/contents/config/main.xml
      


