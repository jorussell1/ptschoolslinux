---
# yaml-language-server: $schema=https://schema.blue-build.org/module-list-v1.json

modules:
  - type: os-release
    properties:
      NAME: ptschoolslinux
  - type: files
    files:
      - source: system
        destination: / # copies files/system/* (* means everything inside it) into your image's root folder /
      - source: backgrounds
        destination: /usr/share/backgrounds/
  - type: dnf
    repos:
      files:
        - https://yum.voxpupuli.org/repo_files/openvox8-release-fedora41.repo
      keys: 
        - https://yum.voxpupuli.org/GPG-KEY-openvox.pub
      copr:
        - atim/starship
      cleanup:
        true
    install:
      packages:
        - micro
        - starship
        - openvox-agent
        - realm
        - sssd
        - sssd-ad
        - oddjob
        - oddjob-mkhomedir
        - adcli
        - samba-common
        - samba-common-tools
        - krb5-workstation
        - openldap-clients
        - authselect
        - gutenprint-cups
        - dymo-cups-drivers
        - glabels
        - distrobox
        - restic
        - deja-dup
        - autofs
    optfix:
      - puppetlabs # openvox-agent install to /opt/puppetlabs
    remove:
      packages:
        # example: removing firefox (in favor of the flatpak)
        # "firefox" is the main package, "firefox-langpacks" is a dependency
        - firefox
        - firefox-langpacks # also remove firefox dependency (not required for all packages, this is a special case)

  - type: fonts
    fonts: 
      nerd-fonts:
        - FiraCode
        - Hack
      google-fonts:
        - Merriweather
        - WorkSans
        - Lora
        - FiraSans
        - Roboto
        - Inter
        - Montserrat
      url-fonts:
        - name: MapleMonoNF
          url: https://github.com/subframe7536/maple-font/releases/download/v7.9/MapleMono-NF-unhinted.zip
        - name: MapleMono
          url: https://github.com/subframe7536/maple-font/releases/download/v7.9/MapleMono-TTF.zip
  - type: script
    snippets:
      - 'cd $CONFIG_DIRECTORY/scripts && for script in *.sh; do [ -f "$script" ] && bash "$script"; done'

  - type: signing # this sets up the proper policy & signing files for signed images to work fully
